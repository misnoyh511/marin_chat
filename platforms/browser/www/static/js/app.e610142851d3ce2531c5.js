webpackJsonp([1],{"5Q3E":function(e,t){},Blse:function(e,t){},CDmb:function(e,t){},JBDC:function(e,t){},LGLo:function(e,t){},N6Y9:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),r=n.n(s),a=n("Xxa5"),o=n.n(a),i=n("exGp"),c=n.n(i),u=(n("Xrl+"),n("fLmE"),n("7+uW")),l=n("EOUi"),d=n.n(l),f=n("LX+c"),p=n.n(f),m=n("NYxO");u.a.use(m.a);var v=new m.a.Store({modules:{timeLine:{state:{}}}}),g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-ons-page",{attrs:{id:"app"}},[t("v-ons-navigator",{attrs:{swipeable:"","page-stack":this.$root.pageStack},on:{deviceBackButton:this.onDeviceBackButton}})],1)},staticRenderFns:[]};var h=n("VU/8")({name:"app",data:function(){return{}},methods:{onDeviceBackButton:function(e){e.preventDefault()}}},g,!1,function(e){n("LGLo")},null,null).exports,b=n("bm7V"),x=n.n(b),k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-ons-page",[t("v-ons-navigator",{attrs:{swipeable:"","page-stack":this.$root.timeLinePageStack}})],1)},staticRenderFns:[]};var w=n("VU/8")({data:function(){return{}},methods:{}},k,!1,function(e){n("TlwO")},"data-v-6d7d7298",null).exports,I={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-ons-page",[t("v-ons-navigator",{attrs:{swipeable:"","page-stack":this.$root.messagePageStack}})],1)},staticRenderFns:[]};var j=n("VU/8")({data:function(){return{}},methods:{}},I,!1,function(e){n("seLa")},"data-v-942c3e74",null).exports,C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-ons-page",[t("v-ons-navigator",{attrs:{swipeable:"","page-stack":this.$root.searchPageStack}})],1)},staticRenderFns:[]};var $=n("VU/8")({data:function(){return{}},methods:{}},C,!1,function(e){n("yIQH")},"data-v-15ccd97f",null).exports,P=n("pFYg"),M=n.n(P),T=n("//Fk"),y=n.n(T),S=n("YZ0n"),U={components:{VueCropper:n.n(S).a},data:function(){return{name:null,age:null,prefecture:null,gender:0,comment:null,vueCropperPreview:{},vueCropperOption:{img:null,size:1,full:!1,outputType:"jpg",canMove:!0,fixedBox:!1,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixed:!0,fixedNumber:[1,1]}}},mounted:function(){var e=this;return c()(o.a.mark(function t(){var n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$root.getMyInfo();case 2:return t.next=4,e.$root.getPrefectures();case 4:if(e.name=e.$root.userInfo.name,e.age=e.$root.userInfo.age,e.prefecture=e.$root.userInfo.prefecture,e.gender=e.$root.userInfo.gender,e.comment=e.$root.userInfo.comment,null===e.$root.userInfo.uuid){t.next=19;break}return t.next=12,fetch("http://a1333.ml/img/profile/"+e.$root.userInfo.uuid+".jpg");case 12:return n=t.sent,t.next=15,n.blob();case 15:s=t.sent,console.log(s),e.vueCropperOption.img=window.URL.createObjectURL(s),console.log("img loaded");case 19:case"end":return t.stop()}},t,e)}))()},methods:{getCroppedBlob:function(){var e=this;return c()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new y.a(function(t){return e.$refs.cropper.getCropBlob(function(e){t(e)})});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,e)}))()},startCrop:function(){this.$refs.cropper.startCrop()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},chooseImg:function(e){var t=this,n=e.target.files[0];if(!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value))return!1;var s=new FileReader;s.onload=function(e){"object"===M()(e.target.result)?t.vueCropperOption.img=window.URL.createObjectURL(new Blob([e.target.result])):t.vueCropperOption.img=e.target.result},s.readAsArrayBuffer(n)},signup:function(){var e=c()(o.a.mark(function e(){var t,n,s,r,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("name").value&&document.getElementById("age").value){e.next=3;break}return alert("名前と年齢は必須です"),e.abrupt("return");case 3:if(null!==this.$root.userId){e.next=20;break}if(t=new FormData(document.getElementById("form1")),null===this.vueCropperOption.img){e.next=11;break}return e.t0=t,e.next=9,this.getCroppedBlob();case 9:e.t1=e.sent,e.t0.append.call(e.t0,"profile_image",e.t1);case 11:return e.next=13,fetch("http://a1333.ml/api/signup",{method:"post",mode:"cors",credentials:"include",body:t});case 13:return n=e.sent,e.next=16,n.json();case 16:(s=e.sent).success&&(this.$root.userId=s.user_id,this.$root.setPushToken(),alert("プロフを登録しました")),e.next=34;break;case 20:if(r=new FormData(document.getElementById("form1")),null===this.vueCropperOption.img){e.next=27;break}return e.t2=r,e.next=25,this.getCroppedBlob();case 25:e.t3=e.sent,e.t2.append.call(e.t2,"profile_image",e.t3);case 27:return e.next=29,fetch("http://a1333.ml/api/update_profile",{method:"post",mode:"cors",credentials:"include",body:r});case 29:return a=e.sent,e.next=32,a.json();case 32:(i=e.sent).success&&(this.$root.userId=i.user_id,this.$root.setPushToken(),alert("プロフを更新しました"));case 34:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ons-page",[n("form",{attrs:{id:"form1"}},[n("div",[n("vueCropper",{ref:"cropper",staticClass:"image-cropper",staticStyle:{height:"300px"},attrs:{img:e.vueCropperOption.img,outputSize:e.vueCropperOption.size,outputType:e.vueCropperOption.outputType,autoCrop:e.vueCropperOption.autoCrop,autoCropWidth:e.vueCropperOption.autoCropWidth,autoCropHeight:e.vueCropperOption.autoCropHeight,fixed:e.vueCropperOption.fixed,fixedNumber:e.vueCropperOption.fixedNumber}}),e._v(" "),n("div",{staticClass:"center crop-btns"},[n("label",{staticClass:"btn",attrs:{for:"image"}},[n("v-ons-button",{staticStyle:{margin:"6px 0"}},[e._v("プロフィール画像アップロード")])],1),e._v(" "),n("v-ons-button",{on:{click:function(t){e.changeScale(1)}}},[e._v("+")]),e._v(" "),n("v-ons-button",{on:{click:function(t){e.changeScale(-1)}}},[e._v("-")]),e._v(" "),n("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"image",accept:"image/*"},on:{change:function(t){e.chooseImg(t)}}})],1)],1),e._v(" "),n("table",[n("tr",[n("td",[n("label",{attrs:{for:"name"}},[e._v("ニックネーム")])]),e._v(" "),n("td",[n("v-ons-input",{attrs:{id:"name",name:"name",modifier:"underbar"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),n("tr",[n("td",[n("label",{attrs:{for:"age"}},[e._v("年齢")])]),e._v(" "),n("td",[n("v-ons-input",{attrs:{id:"age",name:"age",type:"number",modifier:"underbar"},model:{value:e.age,callback:function(t){e.age=t},expression:"age"}})],1)]),e._v(" "),n("tr",[n("td",[n("label",{attrs:{for:"prefecture"}},[e._v("都道府県")])]),e._v(" "),n("td",[n("v-ons-select",{attrs:{id:"prefecture",name:"prefecture"},model:{value:e.prefecture,callback:function(t){e.prefecture=t},expression:"prefecture"}},e._l(e.$root.prefectures,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],1)]),e._v(" "),n("tr",[n("td",[n("label",{attrs:{for:"gender"}},[e._v("性別")])]),e._v(" "),n("td",[n("v-ons-select",{attrs:{id:"gender",name:"gender"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[n("option",{attrs:{value:"0"}},[e._v("男性")]),e._v(" "),n("option",{attrs:{value:"1"}},[e._v("女性")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("非公開")])])],1)]),e._v(" "),n("tr",[n("td",[n("label",{attrs:{for:"comment"}},[e._v("ひとこと")])]),e._v(" "),n("td",[n("v-ons-input",{attrs:{id:"comment",name:"comment",modifier:"underbar",maxlength:"100"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)])]),e._v(" "),n("p",{staticClass:"btn-wrapper"},[n("ons-button",{on:{click:e.signup}},[e._v("登録")])],1)])])},staticRenderFns:[]};var R=n("VU/8")(U,L,!1,function(e){n("N6Y9")},"data-v-27af60c2",null).exports,V={data:function(){return{tabs:[{icon:this.md()?null:"fa-home",label:"タイムライン",page:w,key:"timeLinePage"},{icon:this.md()?null:"fa-search",label:"検索",page:$,key:"searchPage"},{icon:this.md()?null:"fa-envelope",label:"メッセージ",page:j,badge:"",key:"messagePage"},{icon:this.md()?null:"fa-cog",label:"プロフ設定",page:R,key:"userProfileSettingPage"}]}},mounted:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.intervalId=setInterval(function(){e.$root.newMessage?e.tabs[e.$root.messageTabIndex].badge="NEW":e.tabs[e.$root.messageTabIndex].badge=""},1e3);case 1:case"end":return t.stop()}},t,e)}))()},methods:{md:function(){return this.$ons.platform.isAndroid()}},computed:{NewMessage:function(){return this.$root.newMessage?"!":""}}},W={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",{attrs:{id:"app"}},[n("v-ons-tabbar",{attrs:{swipeable:"",position:"auto",tabs:e.tabs,visible:!0,index:e.$root.activeTabIndex},on:{"update:index":function(t){e.$set(e.$root,"activeTabIndex",t)}}})],1)},staticRenderFns:[]};var F=n("VU/8")(V,W,!1,function(e){n("Qokh")},"data-v-4204fad4",null).exports,z={data:function(){return{msg:null}},methods:{postToTimeLine:function(){var e=c()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://a1333.ml/api/timeline",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({msg:this.msg})});case 2:return t=e.sent,e.next=5,t.json();case 5:if(!e.sent.success){e.next=10;break}return e.next=9,this.$root.getTimeLineItems();case 9:this.$root.timeLinePageStack.pop();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},D={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",[e._v("戻る")])],1)]),e._v(" "),n("div",{staticClass:"pa-5"},[n("span",[e._v("メッセージ")])]),e._v(" "),n("div",{staticClass:"pa-5"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"textarea",attrs:{id:"msg",rows:"3"},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}})]),e._v(" "),n("p",{staticClass:"pa-5"},[n("ons-button",{on:{click:e.postToTimeLine}},[e._v("タイムラインに投稿する")])],1)],1)},staticRenderFns:[]};var E=n("VU/8")(z,D,!1,function(e){n("tQW9")},"data-v-4442c0b7",null).exports,N=n("PrNn"),O=n.n(N),B={data:function(){return{toUserId:null,toUserName:null,msg:"",messages:[],intervalId:null,sendButtonDisabled:!1,toUuid:null}},mounted:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMessages();case 2:return t.next=4,e.$root.getPrivateMessageList();case 4:e.toUserName=e.getUserName(),e.intervalId=setInterval(c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMessages();case 2:case"end":return t.stop()}},t,e)})),1e3);case 6:case"end":return t.stop()}},t,e)}))()},destroyed:function(){clearInterval(this.intervalId)},methods:{sleep:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new y.a(function(t){return setTimeout(t,e)}));case 1:case"end":return t.stop()}},n,t)}))()},getMessages:function(){var e=this;return c()(o.a.mark(function t(){var n,s,r,a,i,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,e.messages.length>0&&(n=_.last(e.messages).id),t.next=4,fetch("http://a1333.ml/api/private_message?id="+e.toUserId+"&last_id="+n,{mode:"cors",credentials:"include"});case 4:return s=t.sent,t.next=7,s.text();case 7:if(0===(r=t.sent).length){t.next=16;break}if(!((a=JSON.parse(r)).length>0)){t.next=16;break}for(i=0;i<a.length;i++)e.messages.push(a[i]);return t.next=14,e.sleep(100);case 14:(c=e.$el.querySelector("#message-list")).parentElement.scrollTop=c.parentElement.scrollHeight;case 16:case"end":return t.stop()}},t,e)}))()},postMessage:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.sendButtonDisabled=!0,t.next=3,e.$root.postMessage(e.toUserId,e.msg);case 3:t.sent.success&&(e.msg=""),e.sendButtonDisabled=!1;case 6:case"end":return t.stop()}},t,e)}))()},getGenderString:function(e){return["男性","女性","非公開"][e]},getUserName:function(){var e=this,t=O.a.from(this.$root.privateMessageListItems).where(function(t){return t.id===e.toUserId});return t.count()>0?t.first().name:"11"}}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",{staticClass:"page-dark"},[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",[e._v("戻る")])],1),e._v(" "),n("div",{staticClass:"center"},[e._v("\n      "+e._s(e.toUserName)+"\n    ")])]),e._v(" "),n("v-ons-list",{attrs:{id:"message-list"}},e._l(e.messages,function(t){return n("v-ons-list-item",{key:t.id,attrs:{modifier:"nodivider"}},[n("div",{class:{right:e.$root.userId===t.from_user_id,left:e.$root.userId!==t.from_user_id}},[e.$root.userId!==t.from_user_id?n("img",{staticClass:"list-item__thumbnail",attrs:{src:"http://a1333.ml/img/profile/"+e.toUuid+".jpg"}}):e._e(),e._v(" "),n("span",{staticClass:"message"},[e._v(e._s(t.msg))])])])})),e._v(" "),n("v-ons-bottom-toolbar",{staticClass:"bottom-toolbar"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"textarea",staticStyle:{width:"80%"},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}}),e._v(" "),n("ons-button",{staticClass:"send-btn",attrs:{disabled:e.sendButtonDisabled},on:{click:e.postMessage}},[n("v-ons-icon",{staticClass:"color-gray",attrs:{icon:"fa-paper-plane"}})],1)],1)],1)},staticRenderFns:[]};var G=n("VU/8")(B,H,!1,function(e){n("aHs9")},"data-v-1f982a52",null).exports,q={data:function(){return{state:"initial",profileDetailModalWindowVisible:!1,modalItem:null,userId:null}},mounted:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$root.getUserTimeLineItems(e.userId);case 2:case"end":return t.stop()}},t,e)}))()},methods:{loadTimeLineItem:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$root.getUserTimeLineItems(t.userId);case 2:e();case 3:case"end":return n.stop()}},n,t)}))()},showMessagePage:function(e){if(null===this.$root.userId)alert(this.$root.needRegisterMessage),this.$root.activeTabIndex=this.$root.UserProfileSettingTabIndex;else{for(this.$root.activeTabIndex=this.$root.messageTabIndex;this.$root.messagePageStack.length>1;)this.$root.messagePageStack.pop();this.$root.messagePageStack.push({extends:G,data:function(){return{toUserId:e}}})}},getGenderString:function(e){return["男性","女性","非公開"][e]},showProfileDetailModalWindow:function(e){var t=O.a.from(this.$root.userTimeLineItems).where(function(t){return t.id===e}).first();this.modalItem=t,this.profileDetailModalWindowVisible=!0},deletePostFromTimeLine:function(e){var t=this;return c()(o.a.mark(function n(){var s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!0!==confirm("削除しますか？")){n.next=12;break}return n.next=4,fetch("http://a1333.ml/api/delete_post_from_timeline",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e})});case 4:return s=n.sent,n.next=7,s.json();case 7:if(!0!==n.sent.success){n.next=12;break}return n.next=11,t.$root.getUserTimeLineItems(t.userId);case 11:alert("削除しました。");case 12:case"end":return n.stop()}},n,t)}))()},sendHeart:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t.$root.userId){n.next=5;break}alert(t.$root.needRegisterMessage),t.$root.activeTabIndex=t.$root.UserProfileSettingTabIndex,n.next=8;break;case 5:return n.next=7,t.$root.postMessage(e,"いいね！");case 7:alert("「いいね」しました。");case 8:case"end":return n.stop()}},n,t)}))()},sendReport:function(e,t){var n=this;return c()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(null!==n.$root.userId){s.next=5;break}alert(n.$root.needRegisterMessage),n.$root.activeTabIndex=n.$root.UserProfileSettingTabIndex,s.next=10;break;case 5:if(!0!==confirm("通報しますか？")){s.next=10;break}return s.next=9,n.$root.sendReport(e,t);case 9:alert("通報しました。");case 10:case"end":return s.stop()}},s,n)}))()}}},X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",[e._v("戻る")])],1)]),e._v(" "),n("v-ons-pull-hook",{attrs:{action:e.loadTimeLineItem},on:{changestate:function(t){e.state=t.state}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:"initial"===e.state,expression:"state === 'initial'"}]},[e._v("更新")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"action"===e.state,expression:"state === 'action'"}]},[e._v("読み込み中")])]),e._v(" "),n("v-ons-list",e._l(e.$root.userTimeLineItems,function(t){return n("div",{key:t.id},[n("v-ons-list-item",{attrs:{modifier:"nodivider"}},[n("div",{staticClass:"left"},[n("img",{staticClass:"list-item__thumbnail",attrs:{src:"http://a1333.ml/img/profile/"+t.uuid+".jpg"},on:{click:function(n){e.showProfileDetailModalWindow(t.id)}}})]),e._v(" "),n("div",{staticClass:"center",on:{click:function(n){e.showProfileDetailModalWindow(t.id)}}},[n("span",{staticClass:"list-item__title"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"list-item__title color-gray"},[e._v(e._s(e.getGenderString(t.gender)+" / "+t.age+"歳 / "+t.prefecture))])]),e._v(" "),n("div",{staticClass:"right"},[n("span",[e._v(e._s(e._f("duration")([t.elapsed_seconds,"seconds"],"humanize",!0)))]),e._v(" "),t.user_id===e.$root.userId?n("v-ons-icon",{staticClass:"pl10",attrs:{icon:"fa-trash"},on:{click:function(n){e.deletePostFromTimeLine(t.id)}}}):e._e()],1)]),e._v(" "),n("v-ons-list-item",{staticClass:"no-bg pa-0"},[n("div",{staticClass:"center",on:{click:function(n){e.showProfileDetailModalWindow(t.id)}}},[e._v("\n          "+e._s(t.msg)+"\n        ")])]),e._v(" "),n("v-ons-list-item",{staticClass:"longdivider gray-btns",attrs:{modifier:"longdivider"}},[n("div",{staticClass:"left"},[n("ons-button",{on:{click:function(n){e.sendHeart(t.user_id)}}},[t.user_id!==e.$root.userId?n("v-ons-icon",{staticClass:"color-pink pl10",attrs:{icon:"fa-heart"}}):e._e(),e._v(" いいね")],1)],1),e._v(" "),n("div",{staticClass:"center"},[e.$root.userId!=t.user_id?n("ons-button",{on:{click:function(n){e.showMessagePage(t.user_id)}}},[n("v-ons-icon",{attrs:{icon:"fa-envelope"}}),e._v(" トーク")],1):e._e()],1),e._v(" "),n("div",{staticClass:"right"},[n("ons-button",{staticClass:"triangle-btn"},[t.user_id!==e.$root.userId?n("v-ons-icon",{staticClass:"color-gray",attrs:{icon:"fa-exclamation-triangle"},on:{click:function(n){e.sendReport(t.user_id,t.id)}}}):e._e(),e._v(" 通報\n          ")],1)],1)])],1)})),e._v(" "),!0===e.profileDetailModalWindowVisible?n("v-ons-modal",{staticClass:"profile-modal",attrs:{visible:e.profileDetailModalWindowVisible},on:{click:function(t){e.profileDetailModalWindowVisible=!1}}},[n("h1",[e._v(e._s(e.modalItem.name))]),e._v(" "),n("div",{staticClass:"user-info"},[n("span",[e._v(e._s(e.getGenderString(e.modalItem.gender)+" / "+e.modalItem.age+"歳 / "+e.modalItem.prefecture))])]),e._v(" "),n("img",{staticClass:"fullsize-profile-image",attrs:{src:"http://a1333.ml/img/profile/"+e.modalItem.uuid+".jpg"}}),e._v(" "),n("div",{staticClass:"user-info"},[n("span",[e._v("\n        "+e._s(e.modalItem.comment)+"\n      ")])]),e._v(" "),e.$root.userId!=e.modalItem.user_id?n("ons-button",{on:{click:function(t){e.showMessagePage(e.modalItem.user_id)}}},[n("v-ons-icon",{attrs:{icon:"fa-envelope"}}),e._v(" メッセージを送る")],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var J=n("VU/8")(q,X,!1,function(e){n("5Q3E")},"data-v-1129aa34",null).exports,Q={data:function(){return{state:"initial",profileDetailModalWindowVisible:!1,modalItem:null}},mounted:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$root.getTimeLineItems();case 2:case"end":return t.stop()}},t,e)}))()},methods:{loadTimeLineItem:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$root.getTimeLineItems();case 2:e();case 3:case"end":return n.stop()}},n,t)}))()},showPostPage:function(){null===this.$root.userId?(alert(this.$root.needRegisterMessage),this.$root.activeTabIndex=this.$root.UserProfileSettingTabIndex):this.$root.timeLinePageStack.push(E)},showMessagePage:function(e){if(null===this.$root.userId)alert(this.$root.needRegisterMessage),this.$root.activeTabIndex=this.$root.UserProfileSettingTabIndex;else{for(this.$root.activeTabIndex=this.$root.messageTabIndex;this.$root.messagePageStack.length>1;)this.$root.messagePageStack.pop();this.$root.messagePageStack.push({extends:G,data:function(){return{toUserId:e}}})}},showUserTimeLine:function(e){this.$root.timeLinePageStack.push({extends:J,data:function(){return{userId:e}}})},getGenderString:function(e){return["男性","女性","非公開"][e]},showProfileDetailModalWindow:function(e){var t=O.a.from(this.$root.timeLineItems).where(function(t){return t.id===e}).first();this.modalItem=t,this.profileDetailModalWindowVisible=!0},deletePostFromTimeLine:function(e){var t=this;return c()(o.a.mark(function n(){var s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!0!==confirm("削除しますか？")){n.next=12;break}return n.next=4,fetch("http://a1333.ml/api/delete_post_from_timeline",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e})});case 4:return s=n.sent,n.next=7,s.json();case 7:if(!0!==n.sent.success){n.next=12;break}return n.next=11,t.$root.getTimeLineItems();case 11:alert("削除しました。");case 12:case"end":return n.stop()}},n,t)}))()},sendHeart:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t.$root.userId){n.next=5;break}alert(t.$root.needRegisterMessage),t.$root.activeTabIndex=t.$root.UserProfileSettingTabIndex,n.next=8;break;case 5:return n.next=7,t.$root.postMessage(e,"いいね！");case 7:alert("「いいね」しました。");case 8:case"end":return n.stop()}},n,t)}))()},sendReport:function(e,t){var n=this;return c()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(null!==n.$root.userId){s.next=5;break}alert(n.$root.needRegisterMessage),n.$root.activeTabIndex=n.$root.UserProfileSettingTabIndex,s.next=10;break;case 5:if(!0!==confirm("通報しますか？")){s.next=10;break}return s.next=9,n.$root.sendReport(e,t);case 9:alert("通報しました。");case 10:case"end":return s.stop()}},s,n)}))()}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("div",{staticClass:"toolbar-heading"},[e._v("タイムライン")])])]),e._v(" "),n("v-ons-pull-hook",{attrs:{action:e.loadTimeLineItem},on:{changestate:function(t){e.state=t.state}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:"initial"===e.state,expression:"state === 'initial'"}]},[e._v("更新")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"action"===e.state,expression:"state === 'action'"}]},[e._v("読み込み中")])]),e._v(" "),n("v-ons-list",e._l(e.$root.timeLineItems,function(t){return n("div",{key:t.id},[n("v-ons-list-item",{attrs:{modifier:"nodivider"}},[n("div",{staticClass:"left"},[n("img",{staticClass:"list-item__thumbnail",attrs:{src:"http://a1333.ml/img/profile/"+t.uuid+".jpg"},on:{click:function(n){e.showProfileDetailModalWindow(t.id)}}})]),e._v(" "),n("div",{staticClass:"center",on:{click:function(n){e.showUserTimeLine(t.user_id)}}},[n("span",{staticClass:"list-item__title"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"list-item__title color-gray"},[e._v(e._s(e.getGenderString(t.gender)+" / "+t.age+"歳 / "+t.prefecture))])]),e._v(" "),n("div",{staticClass:"right"},[n("span",[e._v(e._s(e._f("duration")([t.elapsed_seconds,"seconds"],"humanize",!0)))]),e._v(" "),t.user_id===e.$root.userId?n("v-ons-icon",{staticClass:"pl10",attrs:{icon:"fa-trash"},on:{click:function(n){e.deletePostFromTimeLine(t.id)}}}):e._e()],1)]),e._v(" "),n("v-ons-list-item",{staticClass:"no-bg pa-0"},[n("div",{staticClass:"center",on:{click:function(n){e.showUserTimeLine(t.user_id)}}},[e._v("\n          "+e._s(t.msg)+"\n        ")])]),e._v(" "),n("v-ons-list-item",{staticClass:"longdivider gray-btns",attrs:{modifier:"longdivider"}},[n("div",{staticClass:"left"},[n("ons-button",{on:{click:function(n){e.sendHeart(t.user_id)}}},[t.user_id!==e.$root.userId?n("v-ons-icon",{staticClass:"color-pink pl10",attrs:{icon:"fa-heart"}}):e._e(),e._v(" いいね")],1)],1),e._v(" "),n("div",{staticClass:"center"},[e.$root.userId!=t.user_id?n("ons-button",{on:{click:function(n){e.showMessagePage(t.user_id)}}},[n("v-ons-icon",{attrs:{icon:"fa-envelope"}}),e._v(" トーク")],1):e._e()],1),e._v(" "),n("div",{staticClass:"right"},[n("ons-button",{staticClass:"triangle-btn"},[t.user_id!==e.$root.userId?n("v-ons-icon",{staticClass:"color-gray",attrs:{icon:"fa-exclamation-triangle"},on:{click:function(n){e.sendReport(t.user_id,t.id)}}}):e._e(),e._v(" 通報\n          ")],1)],1)])],1)})),e._v(" "),!0===e.profileDetailModalWindowVisible?n("v-ons-modal",{staticClass:"profile-modal",attrs:{visible:e.profileDetailModalWindowVisible},on:{click:function(t){e.profileDetailModalWindowVisible=!1}}},[n("h1",[e._v(e._s(e.modalItem.name))]),e._v(" "),n("div",{staticClass:"user-info"},[n("span",[e._v(e._s(e.getGenderString(e.modalItem.gender)+" / "+e.modalItem.age+"歳 / "+e.modalItem.prefecture))])]),e._v(" "),n("img",{staticClass:"fullsize-profile-image",attrs:{src:"http://a1333.ml/img/profile/"+e.modalItem.uuid+".jpg"}}),e._v(" "),n("div",{staticClass:"user-info"},[n("span",[e._v("\n        "+e._s(e.modalItem.comment)+"\n      ")])]),e._v(" "),e.$root.userId!=e.modalItem.user_id?n("ons-button",{on:{click:function(t){e.showMessagePage(e.modalItem.user_id)}}},[n("v-ons-icon",{attrs:{icon:"fa-envelope"}}),e._v(" メッセージを送る")],1):e._e()],1):e._e(),e._v(" "),n("v-ons-fab",{staticClass:"bottom-pencil",attrs:{ripple:"",position:"bottom right"}},[n("v-ons-icon",{attrs:{icon:"fa-pencil"},on:{click:e.showPostPage}})],1)],1)},staticRenderFns:[]};var K=n("VU/8")(Q,A,!1,function(e){n("asXz")},"data-v-39115afc",null).exports,Y={data:function(){return{profileImageModalWindowVisible:!1,modalItem:null}},mounted:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$root.getPrivateMessageList();case 2:e.intervalId=setInterval(c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$root.getPrivateMessageList();case 2:case"end":return t.stop()}},t,e)})),5e3);case 3:case"end":return t.stop()}},t,e)}))()},methods:{showMessagePage:function(e,t){for(this.$root.activeTabIndex=this.$root.messageTabIndex;this.$root.pageStack.length>1;)this.$root.pageStack.pop();this.$root.pageStack.push({extends:G,data:function(){return{toUserId:e,toUuid:t}}})},getGenderString:function(e){return["男性","女性","非公開"][e]},showProfileImageModalWindow:function(e){var t=O.a.from(this.$root.privateMessageListItems).where(function(t){return t.id===e}).first();this.modalItem=t,this.profileImageModalWindowVisible=!0},showProfileDetailModalWindow:function(e){var t=O.a.from(this.$root.privateMessageListItems).where(function(t){return t.id===e}).first();this.modalItem=t,this.profileDetailModalWindowVisible=!0},blockUser:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!0!==confirm("ブロックしますか？")){n.next=5;break}return n.next=4,t.$root.blockUser(e);case 4:alert("ブロックしました。");case 5:case"end":return n.stop()}},n,t)}))()}}},Z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("div",{staticClass:"toolbar-heading"},[e._v("メッセージ")])])]),e._v(" "),n("v-ons-list",e._l(this.$root.privateMessageListItems,function(t){return n("v-ons-list-item",{key:t.id,staticClass:"longdivider",attrs:{modifier:"longdivider"}},[n("div",{staticClass:"left"},[n("img",{staticClass:"list-item__thumbnail",attrs:{src:"http://a1333.ml/img/profile/"+t.uuid+".jpg"},on:{click:function(n){e.showProfileImageModalWindow(t.id)}}})]),e._v(" "),n("div",{staticClass:"center",on:{click:function(n){e.showMessagePage(t.id,t.uuid)}}},[n("span",{staticClass:"list-item__title"},[e._v(e._s(t.name))]),e._v(" "),n("span",[e._v(e._s(t.msg))]),e._v(" "),n("span",{staticClass:"list-item__title color-gray"},[e._v(e._s(e.getGenderString(t.gender)+" / "+t.age+"歳 / "+t.prefecture))])]),e._v(" "),n("div",{staticClass:"right"},[n("v-ons-icon",{staticClass:"color-pink",attrs:{icon:"fa-ban"},on:{click:function(n){e.blockUser(t.id)}}})],1)])})),e._v(" "),!0===e.profileImageModalWindowVisible?n("v-ons-modal",{attrs:{visible:e.profileImageModalWindowVisible},on:{click:function(t){e.profileImageModalWindowVisible=!1}}},[n("img",{staticClass:"fullsize-profile-image",attrs:{src:"http://a1333.ml/img/profile/"+e.modalItem.uuid+".jpg"}})]):e._e()],1)},staticRenderFns:[]};var ee=n("VU/8")(Y,Z,!1,function(e){n("hTfj")},"data-v-1fc83bb3",null).exports,te={data:function(){return{users:[],profileImageModalWindowVisible:!1,profileDetailModalWindowVisible:!1,modalItem:null}},mounted:function(){},methods:{showMessagePage:function(e){if(null===this.$root.userId)alert(this.$root.needRegisterMessage),this.$root.activeTabIndex=this.$root.UserProfileSettingTabIndex;else{for(this.$root.activeTabIndex=this.$root.messageTabIndex;this.$root.messagePageStack.length>1;)this.$root.messagePageStack.pop();this.$root.messagePageStack.push({extends:G,data:function(){return{toUserId:e}}})}},getGenderString:function(e){return["男性","女性","非公開"][e]},showProfileImageModalWindow:function(e){var t=O.a.from(this.users).where(function(t){return t.user_id===e}).first();this.modalItem=t,this.profileImageModalWindowVisible=!0},showProfileDetailModalWindow:function(e){var t=O.a.from(this.users).where(function(t){return t.user_id===e}).first();this.modalItem=t,this.profileDetailModalWindowVisible=!0},sendHeart:function(e){var t=this;return c()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t.$root.userId){n.next=5;break}alert(t.$root.needRegisterMessage),t.$root.activeTabIndex=t.$root.UserProfileSettingTabIndex,n.next=8;break;case 5:return n.next=7,t.$root.postMessage(e,"いいね！");case 7:alert("「いいね」しました。");case 8:case"end":return n.stop()}},n,t)}))()},sendReport:function(e,t){var n=this;return c()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(null!==n.$root.userId){s.next=5;break}alert(n.$root.needRegisterMessage),n.$root.activeTabIndex=n.$root.UserProfileSettingTabIndex,s.next=10;break;case 5:if(!0!==confirm("通報しますか？")){s.next=10;break}return s.next=9,n.$root.sendReport(e,t);case 9:alert("通報しました。");case 10:case"end":return s.stop()}},s,n)}))()}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",[e._v("戻る")])],1)]),e._v(" "),n("v-ons-list",e._l(e.users,function(t){return n("div",{key:t.user_id},[n("v-ons-list-item",{attrs:{modifier:"nodivider"}},[n("div",{staticClass:"left"},[n("img",{staticClass:"list-item__thumbnail",attrs:{src:"http://a1333.ml/img/profile/"+t.uuid+".jpg"},on:{click:function(n){e.showProfileImageModalWindow(t.user_id)}}})]),e._v(" "),n("div",{staticClass:"center",on:{click:function(n){e.showProfileDetailModalWindow(t.user_id)}}},[n("span",{staticClass:"list-item__title"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"list-item__title color-gray"},[e._v(e._s(e.getGenderString(t.gender)+" / "+t.age+"歳 / "+t.prefecture))])])]),e._v(" "),n("v-ons-list-item",{attrs:{modifier:"nodivider"}},[n("div",{staticClass:"center",on:{click:function(n){e.showProfileDetailModalWindow(t.user_id)}}},[e._v("\n          "+e._s(t.comment)+"\n        ")])]),e._v(" "),n("v-ons-list-item",{staticClass:"longdivider gray-btns",attrs:{modifier:"longdivider"}},[t.user_id!==e.$root.userId?n("div",{staticClass:"left"},[n("ons-button",{on:{click:function(n){e.sendHeart(t.user_id)}}},[n("v-ons-icon",{staticClass:"color-pink pl10",attrs:{icon:"fa-heart"}}),e._v(" いいね")],1)],1):e._e(),e._v(" "),n("div",{staticClass:"center"},[e.$root.userId!=t.user_id?n("ons-button",{on:{click:function(n){e.showMessagePage(t.user_id)}}},[n("v-ons-icon",{attrs:{icon:"fa-envelope"}}),e._v(" トーク")],1):e._e()],1)])],1)})),e._v(" "),!0===e.profileImageModalWindowVisible?n("v-ons-modal",{attrs:{visible:e.profileImageModalWindowVisible},on:{click:function(t){e.profileImageModalWindowVisible=!1}}},[n("img",{staticClass:"fullsize-profile-image",attrs:{src:"http://a1333.ml/img/profile/"+e.modalItem.uuid+".jpg"}})]):e._e(),e._v(" "),!0===e.profileDetailModalWindowVisible?n("v-ons-modal",{staticClass:"profile-modal",attrs:{visible:e.profileDetailModalWindowVisible},on:{click:function(t){e.profileDetailModalWindowVisible=!1}}},[n("h1",[e._v(e._s(e.modalItem.name))]),e._v(" "),n("div",{staticClass:"user-info"},[n("span",[e._v(e._s(e.getGenderString(e.modalItem.gender)+" / "+e.modalItem.age+"歳 / "+e.modalItem.prefecture))])]),e._v(" "),n("img",{staticClass:"halfsize-profile-image",attrs:{src:"http://a1333.ml/img/profile/"+e.modalItem.uuid+".jpg"}}),e._v(" "),n("div",{staticClass:"user-info"},[n("span",[e._v("\n        "+e._s(e.modalItem.msg)+"\n      ")])]),e._v(" "),e.$root.userId!=e.modalItem.user_id?n("ons-button",{on:{click:function(t){e.showMessagePage(e.modalItem.user_id)}}},[n("v-ons-icon",{attrs:{icon:"fa-envelope"}}),e._v(" メッセージを送る")],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var se=n("VU/8")(te,ne,!1,function(e){n("CDmb")},"data-v-64a9f834",null).exports,re=n("GDE4"),ae={components:{vueSlider:n.n(re).a},data:function(){return{prefectures:[],selectedItem:-1,sliderRefreshed:!1,items:[{text:"指定なし",value:-1},{text:"男性",value:0},{text:"女性",value:1}],gender:-1,selectedPrefecture:0,ageValue:[20,29],ageMin:20,ageMax:29,options:{width:"100%",height:8,dotSize:16,min:20,max:29,disabled:!1,show:!0,useKeyboard:!0,tooltip:"always",formatter:"{value}",enableCross:!1,bgStyle:{backgroundColor:"#fff",boxShadow:"inset 0.5px 0.5px 3px 1px rgba(0,0,0,.36)"},tooltipStyle:{backgroundColor:"#666",borderColor:"#666"},processStyle:{backgroundColor:"#999"}}}},watch:{ageValue:function(e){this.ageMin=e[0],this.ageMax=e[1]},"$root.activeTabIndex":function(e){var t=this;1!==e||this.sliderRefreshed||(setTimeout(function(){t.refreshSlider()},500),this.sliderRefreshed=!0)}},mounted:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPrefectures();case 2:case"end":return t.stop()}},t,e)}))()},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},methods:{refreshSlider:function(){this.$refs.ageSelector.refresh(),console.log("refreshed")},getPrefectures:function(){var e=this;return c()(o.a.mark(function t(){var n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a1333.ml/api/prefecture",{mode:"cors",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:s=t.sent,e.prefectures=s;case 7:case"end":return t.stop()}},t,e)}))()},search:function(){var e=this;return c()(o.a.mark(function t(){var n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("age min - ",e.ageMin),console.log("age max - ",e.ageMax),t.next=4,fetch("http://a1333.ml/api/search",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({gender:e.gender,age_min:e.ageMin,age_max:e.ageMax,prefecture:e.selectedPrefecture})});case 4:return n=t.sent,t.next=7,n.json();case 7:(s=t.sent).length>0?e.showSearchResultPage(s):alert("検索結果: 0件");case 9:case"end":return t.stop()}},t,e)}))()},showSearchResultPage:function(e){for(this.$root.activeTabIndex=this.$root.searchTabIndex;this.$root.searchPageStack.length>1;)this.$root.searchPageStack.pop();this.$root.searchPageStack.push({extends:se,data:function(){return{users:e}}})}}},oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("div",{staticClass:"toolbar-heading"},[e._v("検索")])])]),e._v(" "),n("v-ons-list",[n("v-ons-list-item",[n("v-ons-row",[n("v-ons-col",{staticClass:"label"},[e._v("\n          性別\n        ")]),e._v(" "),n("v-ons-col",{attrs:{width:"130px"}},[n("v-ons-select",{attrs:{id:"gender"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},e._l(e.items,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n              "+e._s(t.text)+"\n            ")])}))],1)],1)],1),e._v(" "),n("v-ons-list-item",[n("v-ons-row",[n("v-ons-col",{staticClass:"label"},[e._v("\n          年齢\n        ")]),e._v(" "),n("v-ons-col",{staticClass:"right",attrs:{width:"180px"}},[n("vue-slider",e._b({ref:"ageSelector",model:{value:e.ageValue,callback:function(t){e.ageValue=t},expression:"ageValue"}},"vue-slider",e.options,!1))],1)],1)],1),e._v(" "),n("v-ons-list-item",[n("v-ons-row",[n("v-ons-col",{staticClass:"label"},[e._v("\n          都道府県\n        ")]),e._v(" "),n("v-ons-col",{attrs:{width:"130px"}},[n("v-ons-select",{attrs:{id:"prefecture",name:"prefecture"},model:{value:e.selectedPrefecture,callback:function(t){e.selectedPrefecture=t},expression:"selectedPrefecture"}},e._l(e.prefectures,function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],1)],1)],1),e._v(" "),n("v-ons-list-item",[n("div",{staticClass:"right"},[n("ons-button",{staticClass:"ml10",on:{click:e.search}},[e._v("検索")])],1)])],1)],1)},staticRenderFns:[]};var ie=n("VU/8")(ae,oe,!1,function(e){n("JBDC")},"data-v-abaf2bc4",null).exports,ce={data:function(){return{}},mounted:function(){},methods:{onAgreeButtonClick:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$root.pageStack.pop();case 1:case"end":return t.stop()}},t,e)}))()}}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("ons-page",[t("v-ons-toolbar",[t("div",{staticClass:"right"},[t("v-ons-toolbar-button",{on:{click:this.onAgreeButtonClick}},[this._v("同意する")])],1)]),this._v(" "),t("div",{staticClass:"term-section"},[t("iframe",{attrs:{src:"http://a1333.ml/terms",frameborder:"0"}})])],1)},staticRenderFns:[]};var le=n("VU/8")(ce,ue,!1,function(e){n("Blse")},"data-v-906e6ff6",null).exports,de=n("M4fF"),fe=n.n(de),pe=n("8AgW"),me=n.n(pe),ve=n("PJh5"),ge=n.n(ve);n("ORgI");Object.defineProperty(u.a.prototype,"$lodash",{value:fe.a}),u.a.config.productionTip=!1,u.a.use(d.a),u.a.use(x.a),u.a.use(p.a),u.a.use(me.a,{moment:ge.a}),new u.a({el:"#app",data:function(){return{userId:null,userInfo:{uuid:null,name:null,age:null,prefecture:null,gender:0,comment:null},pushToken:null,activeTabIndex:0,newMessage:!1,searchTabIndex:1,messageTabIndex:2,UserProfileSettingTabIndex:3,pageStack:[F],timeLinePageStack:[K],messagePageStack:[ee],searchPageStack:[ie],timeLineItems:[],userTimeLineItems:[],prefectures:[],privateMessageListItems:[],needRegisterMessage:"この機能を使うにはプロフ登録が必要です。プロフ登録に移動します。"}},created:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMyInfo();case 2:t.sent||e.pageStack.push(le),u.a.cordova.on("deviceready",function(){var t;document.addEventListener("offline",function(){alert("このアプリはネットワーク接続が必要です。")},!1),FCMPlugin.onTokenRefresh(function(t){e.pushToken=t}),FCMPlugin.getToken(function(t){e.pushToken=t}),FCMPlugin.onNotification((t=c()(o.a.mark(function t(n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.wasTapped){t.next=13;break}t.t0=n.type,t.next="new_message"===t.t0?4:11;break;case 4:return e.newMessage=!0,t.next=7,e.getPrivateMessageList();case 7:for(e.activeTabIndex=e.messageTabIndex;e.messagePageStack.length>1;)e.messagePageStack.pop();return e.messagePageStack.push({extends:G,data:function(){return{toUserId:parseInt(n.from_user_id)}}}),t.abrupt("break",11);case 11:t.next=20;break;case 13:t.t1=n.type,t.next="new_message"===t.t1?16:20;break;case 16:return e.newMessage=!0,t.next=19,e.getPrivateMessageList();case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}),function(e){},function(e){alert("Error registering onNotification callback: "+e)})});case 5:case"end":return t.stop()}},t,e)}))()},methods:{getPrefectures:function(){var e=this;return c()(o.a.mark(function t(){var n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a1333.ml/api/prefecture",{mode:"cors",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:s=t.sent,e.prefectures=s;case 7:case"end":return t.stop()}},t,e)}))()},getTimeLineItems:function(){var e=this;return c()(o.a.mark(function t(){var n,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a1333.ml/api/timeline",{mode:"cors",credentials:"include"});case 2:return n=t.sent,t.next=5,n.text();case 5:0!==(s=t.sent).length&&(r=JSON.parse(s),e.timeLineItems=r);case 7:case"end":return t.stop()}},t,e)}))()},getUserTimeLineItems:function(e){var t=this;return c()(o.a.mark(function n(){var s,a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://a1333.ml/api/user_timeline",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e})});case 2:return s=n.sent,n.next=5,s.json();case 5:a=n.sent,t.userTimeLineItems=a;case 7:case"end":return n.stop()}},n,t)}))()},getPrivateMessageList:function(){var e=this;return c()(o.a.mark(function t(){var n,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a1333.ml/api/private_message_list",{mode:"cors",credentials:"include"});case 2:return n=t.sent,t.next=5,n.text();case 5:0!==(s=t.sent).length&&(r=JSON.parse(s),e.privateMessageListItems=r);case 7:case"end":return t.stop()}},t,e)}))()},postMessage:function(e,t){var n=this;return c()(o.a.mark(function s(){var a,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://a1333.ml/api/private_message",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e,msg:t})});case 2:return a=n.sent,n.next=5,a.json();case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}},s,n)}))()},sendReport:function(e,t){var n=this;return c()(o.a.mark(function s(){var a,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://a1333.ml/api/report",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e,message_id:t})});case 2:return a=n.sent,n.next=5,a.json();case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}},s,n)}))()},blockUser:function(e){var t=this;return c()(o.a.mark(function n(){var s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a1333.ml/api/block_user",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e})});case 2:return s=t.sent,t.next=5,s.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}},n,t)}))()},setPushToken:function(){var e=this;return c()(o.a.mark(function t(){var n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.userId&&e.pushToken){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("http://a1333.ml/api/set_push_token",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},mode:"cors",credentials:"include",body:r()({id:e.userId,push_token:e.pushToken})});case 4:return n=t.sent,t.next=7,n.json();case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}},t,e)}))()},getMyInfo:function(){var e=this;return c()(o.a.mark(function t(){var n,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a1333.ml/api/login",{mode:"cors",credentials:"include"});case 2:return n=t.sent,t.next=5,n.text();case 5:if(0!==(s=t.sent).length){t.next=10;break}return t.abrupt("return",!1);case 10:return r=JSON.parse(s),e.userId=r.id,e.userInfo=r,e.setPushToken(),t.abrupt("return",!0);case 15:case"end":return t.stop()}},t,e)}))()}},watch:{activeTabIndex:function(e){e===this.messageTabIndex&&(this.newMessage=!1)}},store:v,template:"<App/>",components:{App:h}})},Qokh:function(e,t){},TlwO:function(e,t){},"Xrl+":function(e,t){},aHs9:function(e,t){},asXz:function(e,t){},fLmE:function(e,t){},hTfj:function(e,t){},seLa:function(e,t){},tQW9:function(e,t){},uslO:function(e,t,n){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function r(e){return n(a(e))}function a(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id="uslO"},yIQH:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e610142851d3ce2531c5.js.map